# üîê Firewall Prototype

## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø—Ä–æ—Ç–æ—Ç–∏–ø —Ñ–∞–π—Ä–≤–æ–ª–∞ –Ω–∞ —è–∑—ã–∫–µ C. –ü—Ä–æ–≥—Ä–∞–º–º–∞ —á–∏—Ç–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–∞–∫–µ—Ç–∞—Ö –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –∏ –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –∑–∞–¥–∞–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª –≤—ã–Ω–æ—Å–∏—Ç –≤–µ—Ä–¥–∏–∫—Ç.

> –ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞:<br>
> ![macOS](https://img.shields.io/badge/macOS-Sonoma%2014.5%20ARM-blue?style=plastic)
![gcc](https://img.shields.io/badge/gcc-14.1.0-blue?style=plastic)
![Make](https://img.shields.io/badge/Make-3.81-blue?style=plastic)
![LCOV](https://img.shields.io/badge/LCOV-2.1-blue?style=plastic)
![Cppcheck](https://img.shields.io/badge/Cppcheck-2.14.1-blue?style=plastic)
![check](https://img.shields.io/badge/check-0.15.2-blue?style=plastic)

<p align="center">
    <img src="materials/img/img1.png" alt="–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞" width="1666"/>
    <br>
    –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
</p>

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
firewall/
‚îú‚îÄ‚îÄ config/          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ CPPLINT.cfg
‚îÇ   ‚îî‚îÄ‚îÄ rules.txt    # –§–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ —Ñ–∞–π–µ—Ä–≤–æ–ª–ª–∞
‚îú‚îÄ‚îÄ coverage/        # –û—Ç—á–µ—Ç—ã –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ –∫–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ report/
‚îú‚îÄ‚îÄ deploy/          # –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ input_files/     # –í—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ input.txt    
‚îú‚îÄ‚îÄ src/             # –ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ main.c
‚îÇ   ‚îî‚îÄ‚îÄ firewall.c
‚îú‚îÄ‚îÄ tests/           # –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ test_firewall.c
‚îú‚îÄ‚îÄ build/           # –°–æ–±—Ä–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ .gitignore       # –§–∞–π–ª –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π
‚îú‚îÄ‚îÄ Makefile         # Makefile –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ README.md        # –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
```

## –§–ª–∞–≥–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–ª–∞–≥–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:

>`-r` –∏–ª–∏ `--rules`: –≠—Ç–æ—Ç —Ñ–ª–∞–≥ —É–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–µ –≤—ã–≤–µ—Å—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø—Ä–∞–≤–∏–ª–∞—Ö —Ñ–∞–π–µ—Ä–≤–æ–ª–∞. –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
```sh
./deploy/firewall -r
```
```
Total rules: 8
Rule   Source/Prefix          Destination/Prefix     Protocol   Verdict 
1      10.0.1.11      /32  =>  1.1.1.1        /32      TCP      ACCEPT  
2      10.0.2.12      /32  =>  1.1.1.1        /32      TCP      DROP    
3      10.0.2.12      /32  =>  8.8.8.8        /32      TCP      ACCEPT  
4      10.0.3.13      /32  =>  0.0.0.0        /0       ANY      ACCEPT  
5      0.0.0.0        /0   =>  1.2.3.4        /32      UDP      DROP    
6      0.0.0.0        /0   =>  1.2.3.4        /32      ANY      ACCEPT  
7      0.0.0.0        /0   =>  10.0.9.1       /32      TCP      DROP    
8      10.0.5.0       /24  =>  0.0.0.0        /0       ANY      ACCEPT
```

## Makefile

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏

- `all`: –û—á–∏—Å—Ç–∫–∞, —Å–±–æ—Ä–∫–∞, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ.
- `run`: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏.
- `build`: –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞.
- `test`: –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤.
- `deploy`: –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ **deploy**.
- `coverage`: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ –∫–æ–¥–∞.
- `check`: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –Ω–∞ —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∏–ª—é.
- `clean`: –û—á–∏—Å—Ç–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–±–æ—Ä–∫–∏ –∏ –æ—Ç—á–µ—Ç–æ–≤ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ –∫–æ–¥–∞.

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:
```sh
make
```

2. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã:
```sh
make run
```
3. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```sh
make test
```

4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ –∫–æ–¥–∞:
```sh
make coverage
```

5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞:
```sh
make check
```

6. –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
```sh
make clean
```
